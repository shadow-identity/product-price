import{a as le,t as pe}from"../chunks/disclose-version.8t0kJPxb.js";import{i as he,h as q,o as Ae,j as Ne,m as T,N as Ie,a4 as ye,a6 as Oe,a7 as ce,O as oe,$ as K,p as D,a8 as L,a9 as ge,k as be,aa as Me,e as ie,ab as De,ac as Re,a3 as Ce,ad as $e,l as He,a0 as Le,R as Je,w as Pe,s as ue,ae as Ue,af as Be,ag as Ge,Z as Ve,ah as Ye,ai as je,aj as Fe,ak as Ke,u as We,al as Xe,q as Ze,am as fe,c as W,t as Qe,d as o,H as h,J as m,I as y,G as qe,D as et}from"../chunks/runtime.CIblE3ht.js";import{a as tt,l as rt,d as at,e as st,s as R}from"../chunks/render.DoIvpP_k.js";import{p as C}from"../chunks/proxy.siktq6NQ.js";import{a as nt}from"../chunks/paths.TuQZtf75.js";const lt=[];function ee(e,t=!1){return J(e,new Map,"",lt)}function J(e,t,r,n,s=null){if(typeof e=="object"&&e!==null){const f=t.get(e);if(f!==void 0)return f;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(he(e)){const v=[];t.set(e,v),s!==null&&t.set(s,v);for(let d=0;d<e.length;d+=1)v.push(J(e[d],t,r,n));return v}if(q(e)===Ae){const v={};t.set(e,v),s!==null&&t.set(s,v);for(var a in e)v[a]=J(e[a],t,r,n);return v}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return J(e.toJSON(),t,r,n,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function ct(e,t){return t}function ot(e,t,r,n){for(var s=[],a=t.length,f=0;f<a;f++)Re(t[f].e,s,!0);var v=a>0&&s.length===0&&r!==null;if(v){var d=r.parentNode;Ce(d),d.append(r),n.clear(),N(e,t[0].prev,t[a-1].next)}$e(s,()=>{for(var z=0;z<a;z++){var l=t[z];v||(n.delete(l.k),N(e,l.prev,l.next)),He(l.e,!v)}})}function it(e,t,r,n,s,a=null){var f=e,v={flags:t,items:new Map,first:null};T&&Ie();var d=null,z=!1;Ne(()=>{var l=r(),p=he(l)?l:l==null?[]:ye(l),c=p.length;if(z&&c===0)return;z=c===0;let i=!1;if(T){var b=f.data===Oe;b!==(c===0)&&(f=ce(),oe(f),K(!1),i=!0)}if(T){for(var w=null,k,u=0;u<c;u++){if(D.nodeType===8&&D.data===Le){f=D,i=!0,K(!1);break}var g=p[u],A=n(g,u);k=me(D,v,w,null,g,A,u,s,t),v.items.set(A,k),w=k}c>0&&oe(ce())}if(!T){var E=Je;ut(p,v,f,s,t,(E.f&L)!==0,n)}a!==null&&(c===0?d?ge(d):d=be(()=>a(f)):d!==null&&Me(d,()=>{d=null})),i&&K(!0),r()}),T&&(f=D)}function ut(e,t,r,n,s,a,f){var v=e.length,d=t.items,z=t.first,l=z,p,c=null,i=[],b=[],w,k,u,g;for(g=0;g<v;g+=1){if(w=e[g],k=f(w,g),u=d.get(k),u===void 0){var A=l?l.e.nodes_start:r;c=me(A,t,c,c===null?t.first:c.next,w,k,g,n,s),d.set(k,c),i=[],b=[],l=c.next;continue}if(ft(u,w,g),u.e.f&L&&ge(u.e),u!==l){if(p!==void 0&&p.has(u)){if(i.length<b.length){var E=b[0],x;c=E.prev;var M=i[0],O=i[i.length-1];for(x=0;x<i.length;x+=1)ve(i[x],E,r);for(x=0;x<b.length;x+=1)p.delete(b[x]);N(t,M.prev,O.next),N(t,c,M),N(t,O,E),l=E,c=O,g-=1,i=[],b=[]}else p.delete(u),ve(u,l,r),N(t,u.prev,u.next),N(t,u,c===null?t.first:c.next),N(t,c,u),c=u;continue}for(i=[],b=[];l!==null&&l.k!==k;)(a||!(l.e.f&L))&&(p??(p=new Set)).add(l),b.push(l),l=l.next;if(l===null)continue;u=l}i.push(u),c=u,l=u.next}if(l!==null||p!==void 0){for(var I=p===void 0?[]:ye(p);l!==null;)(a||!(l.e.f&L))&&I.push(l),l=l.next;var P=I.length;if(P>0){var U=null;ot(t,I,U,d)}}ie.first=t.first&&t.first.e,ie.last=c&&c.e}function ft(e,t,r,n){De(e.v,t),e.i=r}function me(e,t,r,n,s,a,f,v,d){var z=(d&Be)!==0,l=(d&Ge)===0,p=z?l?Pe(s):ue(s):s,c=d&Ue?ue(f):f,i={i:c,v:p,k:a,a:null,e:null,prev:r,next:n};try{return i.e=be(()=>v(e,p,c),T),i.e.prev=r&&r.e,i.e.next=n&&n.e,r===null?t.first=i:(r.next=i,r.e.next=i.e),n!==null&&(n.prev=i,n.e.prev=i.e),i}finally{}}function ve(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,s=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==n;){var f=Ve(a);s.before(a),a=f}}function N(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function $(e){if(T){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;te(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var s=e.checked;te(e,"checked",null),e.checked=s}}};e.__on_r=r,je(r),tt()}}function te(e,t,r,n){var s=e.__attributes??(e.__attributes={});T&&(s[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||s[t]!==(s[t]=r)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Fe]=r),r==null?e.removeAttribute(t):typeof r!="string"&&vt(e).includes(t)?e[t]=r:e.setAttribute(t,r))}var de=new Map;function vt(e){var t=de.get(e.nodeName);if(t)return t;de.set(e.nodeName,t=[]);for(var r,n=q(e),s=Element.prototype;s!==n;){r=Ye(n);for(var a in r)r[a].set&&t.push(a);n=q(n)}return t}function H(e,t,r=t){var n=Ke();rt(e,"input",s=>{var a=s?e.defaultValue:e.value;a=X(e)?Z(a):a,r(a),n&&a!==(a=t())&&(e.value=a??"")}),(T&&e.defaultValue!==e.value||We(t)==null&&e.value)&&r(X(e)?Z(e.value):e.value),Xe(()=>{var s=t();X(e)&&s===Z(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function X(e){var t=e.type;return t==="number"||t==="range"}function Z(e){return e===""?null:+e}const dt=!1,_t=!0,Tt=Object.freeze(Object.defineProperty({__proto__:null,prerender:_t,ssr:dt},Symbol.toStringTag,{value:"Module"}));function re(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function pt(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=re(r);return(s,a)=>n.then(f=>a(f.transaction(t,s).objectStore(t)))}let Q;function ze(){return Q||(Q=pt("keyval-store","keyval")),Q}function ht(e,t=ze()){return t("readonly",r=>re(r.get(e)))}function _e(e,t,r=ze()){return r("readwrite",n=>(n.put(t,e),re(n.transaction)))}const yt=async(e,t)=>{const n=`–ü—Ä–æ–¥—É–∫—Ç—ã, ${new Date().toLocaleString()}`,s=JSON.stringify(ee(o(t)),null,"  "),a=[new File([s],`${n}.json`,{type:"text/plain"})];navigator.canShare({files:a})&&await navigator.share({title:n,files:a})};var gt=(e,t,r)=>t(o(r)),bt=(e,t,r)=>t(o(r)),mt=pe('<tr><td class="svelte-95ucz0"> </td><td class="svelte-95ucz0"> </td><td class="svelte-95ucz0"> </td><td class="svelte-95ucz0"> </td><td class="svelte-95ucz0"> </td><td class="svelte-95ucz0"><div class="svelte-95ucz0"><button type="button" aria-label="–£–¥–∞–ª–∏—Ç—å" class="svelte-95ucz0">üóë</button> <button type="button" aria-label="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" class="svelte-95ucz0">üñãÔ∏è</button></div></td></tr>'),zt=pe('<table class="svelte-95ucz0"><thead class="svelte-95ucz0"><tr><th class="svelte-95ucz0">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th><th class="svelte-95ucz0">–ü—Ä–æ–¥—É–∫—Ç</th><th class="svelte-95ucz0">–°—Ç–æ–∏–º.</th><th class="svelte-95ucz0">–ö–æ–ª-–≤–æ</th><th class="svelte-95ucz0">–¶–µ–Ω–∞</th><th class="svelte-95ucz0"></th></tr></thead><tbody class="svelte-95ucz0"><tr><td class="svelte-95ucz0"><input type="text" class="svelte-95ucz0"></td><td class="svelte-95ucz0"><input type="text" class="svelte-95ucz0"></td><td class="svelte-95ucz0"><input type="number" class="svelte-95ucz0"></td><td class="svelte-95ucz0"><input type="number" class="svelte-95ucz0"></td><td class="svelte-95ucz0"><input type="number" class="svelte-95ucz0"></td><td class="svelte-95ucz0"><button type="button" class="svelte-95ucz0"><img alt="Share" class="svelte-95ucz0"></button></td></tr><!></tbody></table>');function At(e,t){Ze(t,!0);const r="products",n=()=>({category:"",name:"",priceTotal:0,priceUnit:0,amount:1});let s=fe(C([]));ht(r).then((_=[])=>{W(s,C(_))});let a=fe(C(n()));const f=_=>{_.key==="Enter"&&(o(s).unshift(o(a)),W(a,C(n())),_e(r,ee(o(s))).then(()=>console.log("worked")).catch(()=>console.log("failed")))},v=et(()=>o(a).category?o(s).filter(({category:_})=>_.startsWith(o(a).category)):o(s)),d=_=>{const S=o(s).indexOf(_);o(s).splice(S,1),_e(r,ee(o(s)))},z=_=>{const S=o(s).indexOf(_);o(s).splice(S,1),W(a,C(_))};var l=zt(),p=m(h(l)),c=h(p),i=h(c),b=h(i);$(b),y(i);var w=m(i),k=h(w);$(k),y(w);var u=m(w),g=h(u);$(g),y(u);var A=m(u),E=h(A);$(E),y(A);var x=m(A),M=h(x);$(M),y(x);var O=m(x),I=h(O);I.__click=[yt,s];var P=h(I);te(P,"src",`${nt}/share.svg`),y(I),y(O),y(c);var U=m(c);it(U,17,()=>o(v),ct,(_,S)=>{var B=mt(),G=h(B),ke=h(G,!0);y(G);var V=m(G),xe=h(V,!0);y(V);var Y=m(V),we=h(Y,!0);y(Y);var j=m(Y),Se=h(j,!0);y(j);var F=m(j),Ee=h(F,!0);y(F);var ae=m(F),se=h(ae),ne=h(se);ne.__click=[gt,d,S];var Te=m(ne,2);Te.__click=[bt,z,S],y(se),y(ae),y(B),qe(()=>{R(ke,o(S).category),R(xe,o(S).name),R(we,o(S).priceTotal),R(Se,o(S).amount),R(Ee,o(S).priceUnit)}),le(_,B)}),y(p),y(l),st("keypress",c,f),H(b,()=>o(a).category,_=>o(a).category=_),H(k,()=>o(a).name,_=>o(a).name=_),H(g,()=>o(a).priceTotal,_=>o(a).priceTotal=_),H(E,()=>o(a).amount,_=>o(a).amount=_),H(M,()=>o(a).priceUnit,_=>o(a).priceUnit=_),le(e,l),Qe()}at(["click"]);export{At as component,Tt as universal};
